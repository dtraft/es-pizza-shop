OrderProjection:
  handler: ./.bin/orderprojection
  environment:
    TABLE_NAME: !Ref OrderTable
  events:
    - sns: 
        arn: !Ref EventBus
        topicName: 'EventBus-${opt:stage}'
        filterPolicy:
          eventType:
            - OrderStartedEvent
            - OrderServiceTypeSetEvent
  iamRoleStatementsName: 'OrderProjectionRole-${opt:stage}'
  iamRoleStatements:
    - Effect: Allow      
      Action:
        - dynamodb:PutItem
        - dynamodb:GetItem
        - dynamodb:UpdateItem   
        - dynamodb:Query     
      Resource: !GetAtt OrderTable.Arn